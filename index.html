<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‡’äººèººå¹³æ”»ç•¥ - å…¨èƒ½ç¼–è¾‘ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a3a 0%, #0d1b2a 100%);
            color: #e0e0e0;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
            transition: all 0.3s;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(16, 36, 54, 0.8);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            border-left: 4px solid #4a9de3;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            color: #4a9de3;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .subtitle {
            font-size: 1.1rem;
            color: #a0c8f0;
            margin-bottom: 15px;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            background: rgba(74, 157, 227, 0.5);
            border: none;
            border-radius: 5px;
            color: #fff;
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-btn:hover {
            background: rgba(74, 157, 227, 0.7);
            transform: translateY(-2px);
        }
        
        .nav-btn.strategy { background: rgba(74, 157, 227, 0.5); }
        .nav-btn.ranged { background: rgba(255, 158, 100, 0.5); }
        .nav-btn.magic { background: rgba(186, 104, 200, 0.5); }
        .nav-btn.light { background: rgba(76, 217, 100, 0.5); }
        .nav-btn.guard { background: rgba(255, 107, 107, 0.5); }
        .nav-btn.tips { background: rgba(255, 193, 7, 0.5); }
        .nav-btn.navigation { background: rgba(186, 104, 200, 0.5); }
        
        .nav-btn.strategy:hover { background: rgba(74, 157, 227, 0.7); }
        .nav-btn.ranged:hover { background: rgba(255, 158, 100, 0.7); }
        .nav-btn.magic:hover { background: rgba(186, 104, 200, 0.7); }
        .nav-btn.light:hover { background: rgba(76, 217, 100, 0.7); }
        .nav-btn.guard:hover { background: rgba(255, 107, 107, 0.7); }
        .nav-btn.tips:hover { background: rgba(255, 193, 7, 0.7); }
        .nav-btn.navigation:hover { background: rgba(186, 104, 200, 0.7); }
        
        .dev-mode-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 193, 7, 0.8);
            border: none;
            border-radius: 5px;
            color: #333;
            padding: 8px 15px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s;
        }
        
        .dev-mode-btn:hover {
            background: rgba(255, 193, 7, 1);
            transform: scale(1.05);
        }
        
        .dev-mode-btn.active {
            background: rgba(76, 175, 80, 0.8);
            color: white;
        }
        
        .dev-tools {
            display: none;
            position: fixed;
            top: 60px;
            right: 20px;
            background: rgba(30, 40, 50, 0.95);
            border-radius: 5px;
            padding: 15px;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            width: 320px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .dev-tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }
        
        .dev-tab {
            padding: 8px 15px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }
        
        .dev-tab.active {
            border-bottom-color: #4a9de3;
            color: #4a9de3;
        }
        
        .dev-tab-content {
            display: none;
        }
        
        .dev-tab-content.active {
            display: block;
        }
        
        .dev-tools h3 {
            margin-bottom: 10px;
            color: #4a9de3;
            text-align: center;
        }
        
        .dev-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .dev-control-group {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .dev-control-group h4 {
            margin-bottom: 8px;
            color: #a0c8f0;
            font-size: 0.9rem;
        }
        
        .dev-control {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .dev-control label {
            font-size: 0.9rem;
            flex: 1;
        }
        
        .dev-control input, .dev-control select {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 3px;
            color: white;
            padding: 5px;
            width: 120px;
        }
        
        .dev-control input[type="color"] {
            height: 30px;
            padding: 2px;
        }
        
        .dev-control input[type="range"] {
            width: 100px;
        }
        
        .dev-reset {
            background: rgba(244, 67, 54, 0.7);
            border: none;
            border-radius: 3px;
            color: white;
            padding: 8px;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
        }
        
        .dev-reset:hover {
            background: rgba(244, 67, 54, 0.9);
        }
        
        .section-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 3px;
            padding: 5px;
        }
        
        .section-item {
            display: flex;
            align-items: center;
            padding: 5px;
            margin-bottom: 5px;
            background: rgba(255,255,255,0.05);
            border-radius: 3px;
            cursor: move;
        }
        
        .section-item:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .section-toggle {
            margin-right: 10px;
        }
        
        .add-section-btn {
            background: rgba(76, 217, 100, 0.7);
            border: none;
            border-radius: 3px;
            color: white;
            padding: 8px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }
        
        .add-section-btn:hover {
            background: rgba(76, 217, 100, 0.9);
        }
        
        .function-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255,255,255,0.2);
            transition: .4s;
            border-radius: 24px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: #4a9de3;
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        
        .editable-dev {
            outline: 1px dashed transparent;
            transition: outline 0.2s;
            min-height: 20px;
        }
        
        .dev-mode .editable-dev:hover {
            outline: 1px dashed #4a9de3;
            background: rgba(74, 157, 227, 0.1);
        }
        
        .dev-mode .editable-dev.dragging {
            opacity: 0.7;
        }
        
        .drag-handle {
            position: absolute;
            top: 5px;
            left: 5px;
            background: rgba(74, 157, 227, 0.7);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 3px;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            cursor: move;
        }
        
        .dev-mode .drag-handle {
            display: flex;
        }
        
        .class-section {
            margin-bottom: 30px;
            background: rgba(16, 36, 54, 0.8);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            scroll-margin-top: 100px;
            position: relative;
            transition: all 0.3s;
        }
        
        .class-section.hidden {
            display: none;
        }
        
        .class-header {
            padding: 15px 20px;
            font-size: 1.5rem;
            font-weight: bold;
            background: rgba(30, 60, 90, 0.9);
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-left: 4px solid;
        }
        
        .strategy { border-left-color: #4a9de3; }
        .ranged { border-left-color: #ff9e64; }
        .magic { border-left-color: #ba68c8; }
        .light { border-left-color: #4cd964; }
        .guard { border-left-color: #ff6b6b; }
        .tips { border-left-color: #ffc107; }
        .navigation { border-left-color: #ba68c8; }
        
        .add-character {
            background: rgba(107, 207, 127, 0.3);
            border: none;
            border-radius: 3px;
            color: #fff;
            padding: 5px 10px;
            font-size: 0.8rem;
            cursor: pointer;
            display: none;
        }
        
        .dev-mode .add-character {
            display: inline-block;
        }
        
        .add-character:hover {
            background: rgba(107, 207, 127, 0.5);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            background: rgba(40, 70, 100, 0.9);
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid rgba(74, 157, 227, 0.5);
        }
        
        td {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }
        
        tr:nth-child(even) {
            background: rgba(30, 50, 70, 0.4);
        }
        
        tr:hover {
            background: rgba(50, 90, 130, 0.3);
        }
        
        .delete-row {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 107, 107, 0.3);
            border: none;
            border-radius: 3px;
            color: #fff;
            width: 20px;
            height: 20px;
            font-size: 0.7rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
            display: none;
        }
        
        .dev-mode .delete-row {
            display: flex;
        }
        
        tr:hover .delete-row {
            opacity: 1;
        }
        
        .delete-row:hover {
            background: rgba(255, 107, 107, 0.5);
        }
        
        .editable {
            cursor: pointer;
            padding: 3px 5px;
            border-radius: 3px;
            position: relative;
        }
        
        .editable:hover {
            background: transparent;
        }
        
        .dev-mode .editable:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .edit-input {
            display: none;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            color: #fff;
            padding: 5px 8px;
            font-size: inherit;
            font-family: inherit;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 10;
        }
        
        .edit-input:focus {
            outline: none;
            border-color: #4a9de3;
            box-shadow: 0 0 0 2px rgba(74, 157, 227, 0.3);
        }
        
        .weapon {
            color: #ff9e64;
        }
        
        .strength {
            color: #ffd700;
            font-weight: bold;
        }
        
        .training {
            color: #6bcf7f;
        }
        
        .knowledge {
            color: #ba68c8;
        }
        
        .glory {
            color: #ffd700;
        }
        
        .attributes {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            min-height: 30px;
        }
        
        .attr-item {
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            position: relative;
            transition: transform 0.2s;
            color: #fff;
        }
        
        .attr-item:hover {
            transform: scale(1.05);
        }
        
        .color-picker {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background: rgba(30, 40, 50, 0.95);
            border-radius: 5px;
            padding: 10px;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            width: 120px;
        }
        
        .color-options {
            display: flex;
            gap: 5px;
        }
        
        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 3px;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .color-option:hover {
            border-color: #fff;
        }
        
        .color-option.active {
            border-color: #fff;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }
        
        .notes {
            font-style: italic;
            color: #a0c8f0;
            font-size: 0.9rem;
        }
        
        .abbreviation {
            background: rgba(74, 157, 227, 0.2);
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.85rem;
            margin: 0 2px;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #a0c8f0;
            font-size: 0.9rem;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(107, 207, 127, 0.9);
            color: #fff;
            padding: 10px 15px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 1000;
        }
        
        .batch-panel {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(30, 40, 50, 0.95);
            border-radius: 10px;
            padding: 15px;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            display: none;
            min-width: 300px;
            border: 1px solid #4a9de3;
        }
        
        .dev-mode .batch-panel {
            display: block;
        }
        
        .batch-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            color: #4a9de3;
            font-weight: bold;
        }
        
        .batch-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .batch-btn {
            background: rgba(74, 157, 227, 0.7);
            border: none;
            border-radius: 5px;
            color: #fff;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }
        
        .batch-btn:hover {
            background: rgba(74, 157, 227, 0.9);
            transform: translateY(-2px);
        }
        
        .batch-btn.delete {
            background: rgba(255, 107, 107, 0.7);
        }
        
        .batch-btn.delete:hover {
            background: rgba(255, 107, 107, 0.9);
        }
        
        .batch-selection-info {
            font-size: 0.8rem;
            color: #a0c8f0;
            margin-top: 5px;
        }
        
        .row-selector {
            position: absolute;
            top: 5px;
            left: 5px;
            width: 16px;
            height: 16px;
            display: none;
        }
        
        .dev-mode .row-selector {
            display: block;
        }
        
        .strength-selector {
            display: none;
            position: absolute;
            background: rgba(30, 40, 50, 0.95);
            border-radius: 5px;
            padding: 10px;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            border: 1px solid #4a9de3;
        }
        
        .strength-option {
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 3px;
            margin: 2px 0;
            color: #ffd700;
        }
        
        .strength-option:hover {
            background: rgba(255, 215, 0, 0.2);
        }

        .row-number {
            display: inline-block;
            width: 25px;
            text-align: center;
            font-weight: bold;
            color: #a0c8f0;
            margin-right: 8px;
        }

        .auto-link {
            color: #4a9de3;
            text-decoration: none;
            border-bottom: 1px dotted #4a9de3;
            transition: all 0.3s;
        }

        .auto-link:hover {
            color: #6bb5ff;
            border-bottom: 1px solid #6bb5ff;
            text-decoration: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            table {
                display: block;
                overflow-x: auto;
            }
            
            th, td {
                padding: 8px 10px;
            }
            
            .attributes {
                flex-direction: column;
                gap: 3px;
            }
            
            .nav-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-btn {
                width: 100%;
                max-width: 250px;
                justify-content: center;
            }
            
            .dev-tools {
                width: 90%;
                right: 5%;
            }
            
            .batch-panel {
                width: 90%;
                left: 5%;
                transform: none;
            }
            
            .batch-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å¼€å‘è€…æ¨¡å¼æŒ‰é’® -->
        <button class="dev-mode-btn" id="devModeBtn">å¼€å‘è€…æ¨¡å¼</button>
        
        <!-- å¢å¼ºçš„å¼€å‘è€…å·¥å…·é¢æ¿ -->
        <div class="dev-tools" id="devTools">
            <div class="dev-tabs">
                <div class="dev-tab active" data-tab="layout">å¸ƒå±€ç®¡ç†</div>
                <div class="dev-tab" data-tab="style">æ ·å¼ç¼–è¾‘</div>
                <div class="dev-tab" data-tab="content">å†…å®¹æ“ä½œ</div>
                <div class="dev-tab" data-tab="functions">åŠŸèƒ½é…ç½®</div>
            </div>
            
            <!-- å¸ƒå±€ç®¡ç† -->
            <div class="dev-tab-content active" id="layout-tab">
                <h3>å¸ƒå±€ç®¡ç†å™¨</h3>
                <div class="dev-control-group">
                    <h4>æ¿å—ç®¡ç†</h4>
                    <div class="section-list" id="sectionList">
                        <!-- æ¿å—åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                    <button class="add-section-btn" id="addSectionBtn">+ æ·»åŠ æ–°æ¿å—</button>
                </div>
            </div>
            
            <!-- æ ·å¼ç¼–è¾‘ -->
            <div class="dev-tab-content" id="style-tab">
                <h3>æ ·å¼å®šåˆ¶å™¨</h3>
                <div class="dev-control-group">
                    <h4>é¢œè‰²ä¸»é¢˜</h4>
                    <div class="dev-control">
                        <label>èƒŒæ™¯é¢œè‰²:</label>
                        <input type="color" id="bgColor" value="#1a2a3a">
                    </div>
                    <div class="dev-control">
                        <label>æ ‡é¢˜é¢œè‰²:</label>
                        <input type="color" id="titleColor" value="#4a9de3">
                    </div>
                    <div class="dev-control">
                        <label>æ­£æ–‡å­—è‰²:</label>
                        <input type="color" id="textColor" value="#e0e0e0">
                    </div>
                    <div class="dev-control">
                        <label>é“¾æ¥é¢œè‰²:</label>
                        <input type="color" id="linkColor" value="#a0c8f0">
                    </div>
                </div>
                
                <div class="dev-control-group">
                    <h4>å­—ä½“è®¾ç½®</h4>
                    <div class="dev-control">
                        <label>å­—ä½“å¤§å°:</label>
                        <input type="range" id="fontSize" min="12" max="24" value="16">
                    </div>
                    <div class="dev-control">
                        <label>å­—ä½“å®¶æ—:</label>
                        <select id="fontFamily">
                            <option value="'Segoe UI', 'Microsoft YaHei', sans-serif">é»˜è®¤</option>
                            <option value="Arial, sans-serif">Arial</option>
                            <option value="'Times New Roman', serif">Times New Roman</option>
                            <option value="'Courier New', monospace">Courier New</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- å†…å®¹æ“ä½œ -->
            <div class="dev-tab-content" id="content-tab">
                <h3>å†…å®¹ç¼–è¾‘å™¨</h3>
                <div class="dev-control-group">
                    <h4>æ‰¹é‡æ“ä½œ</h4>
                    <div class="dev-control">
                        <label>æŸ¥æ‰¾æ–‡æœ¬:</label>
                        <input type="text" id="findText" placeholder="è¾“å…¥è¦æŸ¥æ‰¾çš„å†…å®¹">
                    </div>
                    <div class="dev-control">
                        <label>æ›¿æ¢ä¸º:</label>
                        <input type="text" id="replaceText" placeholder="è¾“å…¥æ›¿æ¢å†…å®¹">
                    </div>
                    <button class="batch-btn" id="replaceAllBtn">å…¨éƒ¨æ›¿æ¢</button>
                </div>
                
                <div class="dev-control-group">
                    <h4>æ•°æ®ç®¡ç†</h4>
                    <button class="batch-btn" id="exportDataBtn">å¯¼å‡ºæ•°æ®</button>
                    <button class="batch-btn" id="importDataBtn">å¯¼å…¥æ•°æ®</button>
                    <button class="batch-btn delete" id="clearDataBtn">æ¸…ç©ºæ‰€æœ‰æ•°æ®</button>
                </div>
            </div>
            
            <!-- åŠŸèƒ½é…ç½® -->
            <div class="dev-tab-content" id="functions-tab">
                <h3>åŠŸèƒ½é…ç½®ä¸­å¿ƒ</h3>
                <div class="dev-control-group">
                    <h4>åŠŸèƒ½å¼€å…³</h4>
                    <div class="function-toggle">
                        <label>è‡ªåŠ¨é“¾æ¥è¯†åˆ«:</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="autoLinkToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="function-toggle">
                        <label>è¯æ¡é¢œè‰²æ ‡è®°:</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="colorMarkToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="function-toggle">
                        <label>æ‰¹é‡æ“ä½œé¢æ¿:</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="batchPanelToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="dev-control-group">
                    <h4>è¡Œä¸ºè®¾ç½®</h4>
                    <div class="dev-control">
                        <label>é€šçŸ¥æ˜¾ç¤ºæ—¶é—´(ç§’):</label>
                        <input type="number" id="notificationTime" min="1" max="10" value="2">
                    </div>
                    <div class="dev-control">
                        <label>è‡ªåŠ¨ä¿å­˜å»¶è¿Ÿ(æ¯«ç§’):</label>
                        <input type="number" id="autoSaveDelay" min="100" max="5000" value="500">
                    </div>
                </div>
                
                <button class="dev-reset" id="devReset">é‡ç½®æ‰€æœ‰è®¾ç½®</button>
            </div>
        </div>
        
        <header>
            <h1 class="editable-dev" data-type="text">æ‡’äººèººå¹³ç‰ˆæ”»ç•¥</h1>
            <div class="subtitle editable-dev" data-type="text">æ— è´£ä»»å£°æ˜ï¼šä¸ªäººå‘ç†è§£,ä¸åšä»»ä½•ä¿è¯</div>
            
            <!-- å¯¼èˆªæŒ‰é’® -->
            <div class="nav-buttons">
                <button class="nav-btn strategy editable-dev" data-target="strategy-section" data-type="button">
                    <span>ğŸ§ </span> <span class="editable-dev" data-type="text">æˆ˜ç•¥ç±»è§’è‰²</span>
                </button>
                <button class="nav-btn ranged editable-dev" data-target="ranged-section" data-type="button">
                    <span>ğŸ¹</span> <span class="editable-dev" data-type="text">è¿œå‡»ç±»è§’è‰²</span>
                </button>
                <button class="nav-btn magic editable-dev" data-target="magic-section" data-type="button">
                    <span>ğŸ”®</span> <span class="editable-dev" data-type="text">æ„æœ¯ç±»è§’è‰²</span>
                </button>
                <button class="nav-btn light editable-dev" data-target="light-section" data-type="button">
                    <span>âš¡</span> <span class="editable-dev" data-type="text">è½»é”ç±»è§’è‰²</span>
                </button>
                <button class="nav-btn guard editable-dev" data-target="guard-section" data-type="button">
                    <span>ğŸ›¡ï¸</span> <span class="editable-dev" data-type="text">å®¿å«ç±»è§’è‰²</span>
                </button>
                <button class="nav-btn tips editable-dev" data-target="tips-section" data-type="button">
                    <span>ğŸ’¡</span> <span class="editable-dev" data-type="text">æ–°æ‰‹æ³¨æ„äº‹é¡¹</span>
                </button>
                <button class="nav-btn navigation editable-dev" data-target="navigation-section" data-type="button">
                    <span>ğŸ§­</span> <span class="editable-dev" data-type="text">å¯¼èˆªè§„åˆ™</span>
                </button>
            </div>
        </header>
        
        <!-- æ‰¹é‡æ“ä½œé¢æ¿ -->
        <div class="batch-panel" id="batchPanel">
            <div class="batch-header">
                <span>æ‰¹é‡æ“ä½œ</span>
                <button class="batch-btn" id="selectAllBtn">å…¨é€‰å½“å‰ç±»åˆ«</button>
            </div>
            <div class="batch-controls">
                <button class="batch-btn" id="batchWeaponBtn">æ‰¹é‡ä¿®æ”¹æ­¦å™¨</button>
                <button class="batch-btn" id="batchStrengthBtn">æ‰¹é‡ä¿®æ”¹å¼ºåº¦</button>
                <button class="batch-btn" id="batchTrainingBtn">æ‰¹é‡ä¿®æ”¹æ·±é€ </button>
                <button class="batch-btn" id="batchKnowledgeBtn">æ‰¹é‡ä¿®æ”¹è‡´çŸ¥</button>
                <button class="batch-btn" id="batchGloryBtn">æ‰¹é‡ä¿®æ”¹ç„•å½°</button>
                <button class="batch-btn" id="batchAttributesBtn">æ‰¹é‡ä¿®æ”¹è¯æ¡</button>
                <button class="batch-btn delete" id="batchDeleteBtn">æ‰¹é‡åˆ é™¤</button>
            </div>
            <div class="batch-selection-info" id="selectionInfo">å·²é€‰æ‹© 0 ä¸ªæ¡ç›®</div>
        </div>
        
        <!-- å„ä¸ªå†…å®¹æ¿å— -->
        <section class="class-section strategy editable-dev" id="strategy-section" data-type="section">
            <div class="drag-handle">â‰¡</div>
            <div class="class-header strategy">
                <span class="editable-dev" data-type="text">ğŸ§  æˆ˜ç•¥ç±»è§’è‰²</span>
                <button class="add-character editable-dev" data-type="strategy">+ æ·»åŠ è§’è‰²</button>
            </div>
            <table id="strategy-table">
                <thead>
                    <tr>
                        <th width="30px"></th>
                        <th class="editable-dev" data-type="text">åºå·</th>
                        <th class="editable-dev" data-type="text">è§’è‰²åç§°</th>
                        <th class="editable-dev" data-type="text">æ­¦å™¨</th>
                        <th class="editable-dev" data-type="text">å¼ºåº¦</th>
                        <th class="editable-dev" data-type="text">æ·±é€ </th>
                        <th class="editable-dev" data-type="text">è‡´çŸ¥</th>
                        <th class="editable-dev" data-type="text">ç„•å½°</th>
                        <th class="editable-dev" data-type="text">è¯æ¡æ¨è</th>
                        <th class="editable-dev" data-type="text">å¤‡æ³¨</th>
                        <th width="30px"></th>
                    </tr>
                </thead>
                <tbody id="strategy-tbody">
                    <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </tbody>
            </table>
        </section>
        
        <section class="class-section ranged editable-dev" id="ranged-section" data-type="section">
            <div class="drag-handle">â‰¡</div>
            <div class="class-header ranged">
                <span class="editable-dev" data-type="text">ğŸ¹ è¿œå‡»ç±»è§’è‰²</span>
                <button class="add-character editable-dev" data-type="ranged">+ æ·»åŠ è§’è‰²</button>
            </div>
            <table id="ranged-table">
                <thead>
                    <tr>
                        <th width="30px"></th>
                        <th class="editable-dev" data-type="text">åºå·</th>
                        <th class="editable-dev" data-type="text">è§’è‰²åç§°</th>
                        <th class="editable-dev" data-type="text">æ­¦å™¨</th>
                        <th class="editable-dev" data-type="text">å¼ºåº¦</th>
                        <th class="editable-dev" data-type="text">æ·±é€ </th>
                        <th class="editable-dev" data-type="text">è‡´çŸ¥</th>
                        <th class="editable-dev" data-type="text">ç„•å½°</th>
                        <th class="editable-dev" data-type="text">è¯æ¡æ¨è</th>
                        <th class="editable-dev" data-type="text">å¤‡æ³¨</th>
                        <th width="30px"></th>
                    </tr>
                </thead>
                <tbody id="ranged-tbody">
                    <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </tbody>
            </table>
        </section>
        
        <section class="class-section magic editable-dev" id="magic-section" data-type="section">
            <div class="drag-handle">â‰¡</div>
            <div class="class-header magic">
                <span class="editable-dev" data-type="text">ğŸ”® æ„æœ¯ç±»è§’è‰²</span>
                <button class="add-character editable-dev" data-type="magic">+ æ·»åŠ è§’è‰²</button>
            </div>
            <table id="magic-table">
                <thead>
                    <tr>
                        <th width="30px"></th>
                        <th class="editable-dev" data-type="text">åºå·</th>
                        <th class="editable-dev" data-type="text">è§’è‰²åç§°</th>
                        <th class="editable-dev" data-type="text">æ­¦å™¨</th>
                        <th class="editable-dev" data-type="text">å¼ºåº¦</th>
                        <th class="editable-dev" data-type="text">æ·±é€ </th>
                        <th class="editable-dev" data-type="text">è‡´çŸ¥</th>
                        <th class="editable-dev" data-type="text">ç„•å½°</th>
                        <th class="editable-dev" data-type="text">è¯æ¡æ¨è</th>
                        <th class="editable-dev" data-type="text">å¤‡æ³¨</th>
                        <th width="30px"></th>
                    </tr>
                </thead>
                <tbody id="magic-tbody">
                    <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </tbody>
            </table>
        </section>
        
        <section class="class-section light editable-dev" id="light-section" data-type="section">
            <div class="drag-handle">â‰¡</div>
            <div class="class-header light">
                <span class="editable-dev" data-type="text">âš¡ è½»é”ç±»è§’è‰²</span>
                <button class="add-character editable-dev" data-type="light">+ æ·»åŠ è§’è‰²</button>
            </div>
            <table id="light-table">
                <thead>
                    <tr>
                        <th width="30px"></th>
                        <th class="editable-dev" data-type="text">åºå·</th>
                        <th class="editable-dev" data-type="text">è§’è‰²åç§°</th>
                        <th class="editable-dev" data-type="text">æ­¦å™¨</th>
                        <th class="editable-dev" data-type="text">å¼ºåº¦</th>
                        <th class="editable-dev" data-type="text">æ·±é€ </th>
                        <th class="editable-dev" data-type="text">è‡´çŸ¥</th>
                        <th class="editable-dev" data-type="text">ç„•å½°</th>
                        <th class="editable-dev" data-type="text">è¯æ¡æ¨è</th>
                        <th class="editable-dev" data-type="text">å¤‡æ³¨</th>
                        <th width="30px"></th>
                    </tr>
                </thead>
                <tbody id="light-tbody">
                    <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </tbody>
            </table>
        </section>
        
        <section class="class-section guard editable-dev" id="guard-section" data-type="section">
            <div class="drag-handle">â‰¡</div>
            <div class="class-header guard">
                <span class="editable-dev" data-type="text">ğŸ›¡ï¸ å®¿å«ç±»è§’è‰²</span>
                <button class="add-character editable-dev" data-type="guard">+ æ·»åŠ è§’è‰²</button>
            </div>
            <table id="guard-table">
                <thead>
                    <tr>
                        <th width="30px"></th>
                        <th class="editable-dev" data-type="text">åºå·</th>
                        <th class="editable-dev" data-type="text">è§’è‰²åç§°</th>
                        <th class="editable-dev" data-type="text">æ­¦å™¨</th>
                        <th class="editable-dev" data-type="text">å¼ºåº¦</th>
                        <th class="editable-dev" data-type="text">æ·±é€ </th>
                        <th class="editable-dev" data-type="text">è‡´çŸ¥</th>
                        <th class="editable-dev" data-type="text">ç„•å½°</th>
                        <th class="editable-dev" data-type="text">è¯æ¡æ¨è</th>
                        <th class="editable-dev" data-type="text">å¤‡æ³¨</th>
                        <th width="30px"></th>
                    </tr>
                </thead>
                <tbody id="guard-tbody">
                    <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </tbody>
            </table>
        </section>
        
        <section class="class-section tips editable-dev" id="tips-section" data-type="section">
            <div class="drag-handle">â‰¡</div>
            <div class="class-header tips">
                <span class="editable-dev" data-type="text">ğŸ’¡ æ–°æ‰‹æ³¨æ„äº‹é¡¹</span>
                <button class="add-character editable-dev" data-type="tips">+ æ·»åŠ æ³¨æ„äº‹é¡¹</button>
            </div>
            <table id="tips-table">
                <thead>
                    <tr>
                        <th width="30px"></th>
                        <th class="editable-dev" data-type="text">åºå·</th>
                        <th class="editable-dev" data-type="text">æ³¨æ„äº‹é¡¹</th>
                        <th class="editable-dev" data-type="text">å¤‡æ³¨</th>
                        <th width="30px"></th>
                    </tr>
                </thead>
                <tbody id="tips-tbody">
                    <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </tbody>
            </table>
        </section>
        
        <section class="class-section navigation editable-dev" id="navigation-section" data-type="section">
            <div class="drag-handle">â‰¡</div>
            <div class="class-header navigation">
                <span class="editable-dev" data-type="text">ğŸ§­ å¯¼èˆªè§„åˆ™</span>
                <button class="add-character editable-dev" data-type="navigation">+ æ·»åŠ è§„åˆ™</button>
            </div>
            <table id="navigation-table">
                <thead>
                    <tr>
                        <th width="30px"></th>
                        <th class="editable-dev" data-type="text">åºå·</th>
                        <th class="editable-dev" data-type="text">è§„åˆ™è¯´æ˜</th>
                        <th class="editable-dev" data-type="text">å¤‡æ³¨</th>
                        <th width="30px"></th>
                    </tr>
                </thead>
                <tbody id="navigation-tbody">
                    <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </tbody>
            </table>
        </section>
        
        <footer class="editable-dev" data-type="section">
            <p class="editable-dev" data-type="text">ç¼©å†™è¯´æ˜: 
                <span class="abbreviation editable-dev" data-type="text">æš´</span>=<span class="editable-dev" data-type="text">æš´å‡»</span>, 
                <span class="abbreviation editable-dev" data-type="text">çˆ†</span>=<span class="editable-dev" data-type="text">çˆ†ä¼¤</span>, 
                <span class="abbreviation editable-dev" data-type="text">æ„</span>=<span class="editable-dev" data-type="text">æ„ç´ ä¼¤å®³æå‡</span>, 
                <span class="abbreviation editable-dev" data-type="text">ç‰©</span>=<span class="editable-dev" data-type="text">ç‰©ç†ä¼¤å®³æå‡</span>, 
                <span class="abbreviation editable-dev" data-type="text">å…¨</span>=<span class="editable-dev" data-type="text">ä¼¤å®³æå‡</span>, 
                <span class="abbreviation editable-dev" data-type="text">æ”»%</span>=<span class="editable-dev" data-type="text">ç™¾åˆ†æ¯”æ”»å‡»åŠ›</span>, 
                <span class="abbreviation editable-dev" data-type="text">æ”»</span>=<span class="editable-dev" data-type="text">æ”»å‡»åŠ›</span>
            </p>
            <p class="editable-dev" data-type="text">è¯æ¡ä¼˜å…ˆçº§: çº¢è‰² > è“è‰² > ç»¿è‰²ï¼ˆç»¿è‰²è¯æ¡å¯ä»»é€‰ï¼‰</p>
            <p class="editable-dev" data-type="text" style="margin-top: 10px;">æç¤º: å³é”®ç‚¹å‡»è¯æ¡æ›´æ”¹é¢œè‰²</p>
        </footer>
        
        <div class="notification" id="notification">æ›´æ”¹å·²ä¿å­˜ï¼</div>
    </div>

    <script>
        // ç³»ç»Ÿç›‘æ§
        const systemMonitor = {
            originalFunctions: new Map(),
            backupData: null,
            startMonitoring: function() {
                console.log('ğŸ”’ ç³»ç»Ÿç›‘æ§å·²å¯åŠ¨ - ä¿æŠ¤ç°æœ‰åŠŸèƒ½');
                this.backupData = JSON.parse(JSON.stringify(loadData()));
            },
            healthCheck: function() {
                const currentData = loadData();
                const isDataIntegrity = JSON.stringify(this.backupData) === JSON.stringify(currentData);
                console.log('ğŸ“Š ç³»ç»Ÿå¥åº·æ£€æŸ¥:', {
                    æ•°æ®å®Œæ•´æ€§: isDataIntegrity ? 'âœ… æ­£å¸¸' : 'âŒ å¼‚å¸¸',
                    å¼€å‘è€…æ¨¡å¼: document.body.classList.contains('dev-mode') ? 'å¼€å¯' : 'å…³é—­',
                    è¡¨æ ¼æ•°é‡: document.querySelectorAll('.class-section').length
                });
                return isDataIntegrity;
            }
        };
        systemMonitor.startMonitoring();

        // ç®€åŒ–é¢œè‰²é€‰é¡¹
        const colorOptions = [
            { name: 'çº¢è‰²', value: '#ff6b6b' },
            { name: 'è“è‰²', value: '#4a9de3' },
            { name: 'ç»¿è‰²', value: '#6bcf7f' }
        ];

        // å¼ºåº¦é€‰é¡¹
        const strengthOptions = ['S+', 'S', 'A+', 'A', 'B+', 'B', 'C'];

        // åˆå§‹æ•°æ®
        const initialData = {
            strategy: [
                {
                    name: "é“¶é›€å±±æ±‰ç®€",
                    weapon: "æµäº‘",
                    strength: "S+",
                    training: "æˆ’å«7201",
                    knowledge: "0è‡´",
                    glory: "æœªè®¾ç½®",
                    attributes: [
                        { text: "æš´", color: "#ff6b6b" },
                        { text: "çˆ†", color: "#ff6b6b" },
                        { text: "æ„", color: "#ff6b6b" },
                        { text: "å…¨", color: "#ff6b6b" },
                        { text: "æ”»%", color: "#4a9de3" },
                        { text: "è­¦", color: "#4a9de3" }
                    ],
                    notes: "æ— æš´æ­é…é“¶é›€7201ï¼Œå‚è€ƒé“¾æ¥ï¼šhttps://example.com/silver-sparrow"
                }
            ],
            ranged: [
                {
                    name: "è¿œå‡»è§’è‰²A",
                    weapon: "é“œçŠ´å¼©",
                    strength: "S",
                    training: "ç ´ç¢5500",
                    knowledge: "0è‡´/3è‡´",
                    glory: "æœªè®¾ç½®",
                    attributes: [
                        { text: "ç‰©ä¼¤", color: "#ff6b6b" },
                        { text: "å…¨ä¼¤", color: "#ff6b6b" },
                        { text: "çˆ†", color: "#ff6b6b" }
                    ],
                    notes: "è¿œå‡»ï¼Œè§†é¢‘æ•™ç¨‹ï¼šwww.youtube.com/watch?v=example123"
                }
            ],
            magic: [
                {
                    name: "æ„æœ¯è§’è‰²A",
                    weapon: "æµäº‘",
                    strength: "A",
                    training: "å‚¨4600/å¨4303",
                    knowledge: "3è‡´/6è‡´",
                    glory: "æœªè®¾ç½®",
                    attributes: [
                        { text: "æš´", color: "#ff6b6b" },
                        { text: "çˆ†", color: "#ff6b6b" },
                        { text: "æ„", color: "#ff6b6b" },
                        { text: "å…¨", color: "#ff6b6b" }
                    ],
                    notes: "æ›´å¤šä¿¡æ¯è¯·è®¿é—®ï¼šhttps://wiki.example.com/magic-guide"
                }
            ],
            light: [
                {
                    name: "è½»é”è§’è‰²A",
                    weapon: "æµäº‘",
                    strength: "B+",
                    training: "ç©¿ç”²3700",
                    knowledge: "3è‡´",
                    glory: "æœªè®¾ç½®",
                    attributes: [
                        { text: "ç‰©", color: "#ff6b6b" },
                        { text: "å…¨", color: "#ff6b6b" },
                        { text: "æ”»å‡»%", color: "#4a9de3" },
                        { text: "æ”»å‡»", color: "#4a9de3" }
                    ],
                    notes: ""
                }
            ],
            guard: [
                {
                    name: "å®¿å«è§’è‰²A",
                    weapon: "æµäº‘",
                    strength: "A+",
                    training: "å›ºé˜²0307",
                    knowledge: "0è‡´/3è‡´",
                    glory: "æœªè®¾ç½®",
                    attributes: [
                        { text: "æ±²å–", color: "#ff6b6b" },
                        { text: "ç”Ÿå‘½", color: "#ff6b6b" },
                        { text: "ç”Ÿå‘½", color: "#ff6b6b" },
                        { text: "åŒé˜²", color: "#4a9de3" }
                    ],
                    notes: "é˜²å¾¡é…ç½®å‚è€ƒï¼šhttp://defense-guide.example.com"
                }
            ],
            tips: [
                {
                    name: "èµ„æºåˆ†é…",
                    notes: "ä¼˜å…ˆåŸ¹å…»æ ¸å¿ƒè¾“å‡ºè§’è‰²ï¼Œèµ„æºä¸è¦è¿‡äºåˆ†æ•£ã€‚æ–°æ‰‹æ”»ç•¥ï¼šhttps://beginner-guide.example.com"
                }
            ],
            navigation: [
                {
                    name: "é¡µé¢å¯¼èˆª",
                    notes: "ç‚¹å‡»é¡¶éƒ¨å¯¼èˆªæŒ‰é’®å¯ä»¥å¿«é€Ÿè·³è½¬åˆ°å¯¹åº”åˆ†ç±»ã€‚é—®é¢˜åé¦ˆï¼šsupport@example.com"
                }
            ]
        };

        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®æˆ–ä½¿ç”¨åˆå§‹æ•°æ®
        function loadData() {
            const savedData = localStorage.getItem('characterData');
            return savedData ? JSON.parse(savedData) : initialData;
        }

        // ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
        function saveData(data) {
            localStorage.setItem('characterData', JSON.stringify(data));
        }

        // æ ¼å¼åŒ–å±æ€§æ˜¾ç¤º
        function formatAttributes(attributes) {
            if (!attributes || !Array.isArray(attributes)) return '';
            
            return attributes.map(attr => {
                return `<span class="attr-item" data-text="${attr.text}" style="color: ${attr.color};">${attr.text}</span>`;
            }).join('');
        }

        // è‡ªåŠ¨è¯†åˆ«é“¾æ¥å¹¶è½¬æ¢ä¸ºå¯ç‚¹å‡»é“¾æ¥
        function autoLink(text) {
            if (!text) return '';
            
            const urlRegex = /(https?:\/\/[^\s]+|www\.[^\s]+|[^\s]+\.[^\s]{2,})/gi;
            
            return text.replace(urlRegex, function(url) {
                let href = url;
                if (!url.startsWith('http://') && !url.startsWith('https://') && !url.startsWith('mailto:')) {
                    if (url.includes('@')) {
                        href = 'mailto:' + url;
                    } else {
                        href = 'http://' + url;
                    }
                }
                
                return `<a href="${href}" class="auto-link" target="_blank" rel="noopener noreferrer">${url}</a>`;
            });
        }

        // æ¸²æŸ“è¡¨æ ¼
        function renderTables() {
            const data = loadData();
            
            for (const [type, characters] of Object.entries(data)) {
                const tbody = document.getElementById(`${type}-tbody`);
                if (!tbody) continue;
                
                tbody.innerHTML = '';
                
                characters.forEach((character, index) => {
                    const row = createTableRow(character, type, index);
                    tbody.appendChild(row);
                });
            }
            
            bindColorPickerEvents();
            updateEditability();
            updateSelectionInfo();
            updateSectionList();
        }

        // åˆ›å»ºè¡¨æ ¼è¡Œ
        function createTableRow(character, type, index) {
            const row = document.createElement('tr');
            const rowNumber = index + 1;
            
            if (type === 'tips' || type === 'navigation') {
                row.innerHTML = `
                    <td>
                        <input type="checkbox" class="row-selector" data-type="${type}" data-index="${index}">
                    </td>
                    <td>
                        <div class="editable number-editable editable-dev" data-type="text">
                            <span class="row-number">${rowNumber}.</span>
                        </div>
                    </td>
                    <td>
                        <div class="editable name-editable editable-dev" data-type="text">
                            <span class="name-text">${character.name}</span>
                            <input type="text" class="edit-input name-edit" value="${character.name}">
                        </div>
                        <button class="delete-row" data-type="${type}" data-index="${index}">Ã—</button>
                    </td>
                    <td>
                        <div class="editable notes-editable editable-dev" data-type="text">
                            <span class="notes-text notes">${autoLink(character.notes)}</span>
                            <input type="text" class="edit-input notes-edit" value="${character.notes}">
                        </div>
                    </td>
                    <td></td>
                `;
            } else {
                row.innerHTML = `
                    <td>
                        <input type="checkbox" class="row-selector" data-type="${type}" data-index="${index}">
                    </td>
                    <td>
                        <div class="editable number-editable editable-dev" data-type="text">
                            <span class="row-number">${rowNumber}.</span>
                        </div>
                    </td>
                    <td>
                        <div class="editable name-editable editable-dev" data-type="text">
                            <span class="name-text">${character.name}</span>
                            <input type="text" class="edit-input name-edit" value="${character.name}">
                        </div>
                        <button class="delete-row" data-type="${type}" data-index="${index}">Ã—</button>
                    </td>
                    <td>
                        <div class="editable weapon-editable editable-dev" data-type="text">
                            <span class="weapon-text weapon">${character.weapon}</span>
                            <input type="text" class="edit-input weapon-edit" value="${character.weapon}">
                        </div>
                    </td>
                    <td>
                        <div class="editable strength-editable editable-dev" data-type="text">
                            <span class="strength-text strength">${character.strength}</span>
                            <input type="text" class="edit-input strength-edit" value="${character.strength}">
                        </div>
                    </td>
                    <td>
                        <div class="editable training-editable editable-dev" data-type="text">
                            <span class="training-text training">${character.training}</span>
                            <input type="text" class="edit-input training-edit" value="${character.training}">
                        </div>
                    </td>
                    <td>
                        <div class="editable knowledge-editable editable-dev" data-type="text">
                            <span class="knowledge-text knowledge">${character.knowledge}</span>
                            <input type="text" class="edit-input knowledge-edit" value="${character.knowledge}">
                        </div>
                    </td>
                    <td>
                        <div class="editable glory-editable editable-dev" data-type="text">
                            <span class="glory-text glory">${character.glory}</span>
                            <input type="text" class="edit-input glory-edit" value="${character.glory}">
                        </div>
                    </td>
                    <td>
                        <div class="editable attributes-editable editable-dev" data-type="text">
                            <div class="attributes-text attributes">${formatAttributes(character.attributes)}</div>
                            <input type="text" class="edit-input attributes-edit" value="${getAttributesText(character.attributes)}">
                        </div>
                    </td>
                    <td>
                        <div class="editable notes-editable editable-dev" data-type="text">
                            <span class="notes-text notes">${autoLink(character.notes)}</span>
                            <input type="text" class="edit-input notes-edit" value="${character.notes}">
                        </div>
                    </td>
                    <td></td>
                `;
            }
            
            addEventListenersToRowFixed(row, type, index);
            return row;
        }

        // è·å–å±æ€§æ–‡æœ¬
        function getAttributesText(attributes) {
            if (!attributes || !Array.isArray(attributes)) return '';
            return attributes.map(attr => attr.text).join('/');
        }

        // ä¿®å¤ç‰ˆï¼šä¸ºè¡Œæ·»åŠ äº‹ä»¶ç›‘å¬å™¨
        function addEventListenersToRowFixed(row, type, index) {
            const selector = row.querySelector('.row-selector');
            selector.addEventListener('change', function() {
                updateSelectionInfo();
            });
            
            // åç§°ç¼–è¾‘
            const nameEditable = row.querySelector('.name-editable');
            const nameText = row.querySelector('.name-text');
            const nameEdit = row.querySelector('.name-edit');
            
            nameEditable.addEventListener('click', (e) => {
                if (!document.body.classList.contains('dev-mode')) {
                    e.stopPropagation();
                    return;
                }
                
                nameText.style.display = 'none';
                nameEdit.style.display = 'block';
                nameEdit.focus();
                nameEdit.select();
            });
            
            nameEdit.addEventListener('blur', () => saveEdit(nameEdit, type, index, 'name'));
            nameEdit.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') saveEdit(nameEdit, type, index, 'name');
                if (e.key === 'Escape') cancelEdit(nameEdit);
            });
            
            // å¤‡æ³¨ç¼–è¾‘ - ä¿®å¤é“¾æ¥ç‚¹å‡»é—®é¢˜
            const notesEditable = row.querySelector('.notes-editable');
            const notesText = row.querySelector('.notes-text');
            const notesEdit = row.querySelector('.notes-edit');
            
            notesText.addEventListener('click', (e) => {
                if (e.target.classList.contains('auto-link')) {
                    e.stopPropagation();
                    return;
                }
            });
            
            notesEditable.addEventListener('click', (e) => {
                if (e.target.classList.contains('auto-link')) {
                    return;
                }
                
                if (!document.body.classList.contains('dev-mode')) {
                    e.stopPropagation();
                    return;
                }
                
                notesText.style.display = 'none';
                notesEdit.style.display = 'block';
                notesEdit.focus();
                notesEdit.select();
            });
            
            notesEdit.addEventListener('blur', () => saveEdit(notesEdit, type, index, 'notes'));
            notesEdit.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') saveEdit(notesEdit, type, index, 'notes');
                if (e.key === 'Escape') cancelEdit(notesEdit);
            });
            
            // å…¶ä»–å­—æ®µç¼–è¾‘...
            if (type !== 'tips' && type !== 'navigation') {
                // æ­¦å™¨ç¼–è¾‘
                const weaponEditable = row.querySelector('.weapon-editable');
                const weaponText = row.querySelector('.weapon-text');
                const weaponEdit = row.querySelector('.weapon-edit');
                
                weaponEditable.addEventListener('click', (e) => {
                    if (!document.body.classList.contains('dev-mode')) {
                        e.stopPropagation();
                        return;
                    }
                    
                    weaponText.style.display = 'none';
                    weaponEdit.style.display = 'block';
                    weaponEdit.focus();
                    weaponEdit.select();
                });
                
                weaponEdit.addEventListener('blur', () => saveEdit(weaponEdit, type, index, 'weapon'));
                weaponEdit.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') saveEdit(weaponEdit, type, index, 'weapon');
                    if (e.key === 'Escape') cancelEdit(weaponEdit);
                });
                
                // å¼ºåº¦ç¼–è¾‘
                const strengthEditable = row.querySelector('.strength-editable');
                const strengthText = row.querySelector('.strength-text');
                
                strengthEditable.addEventListener('click', (e) => {
                    if (!document.body.classList.contains('dev-mode')) {
                        e.stopPropagation();
                        return;
                    }
                    
                    showStrengthSelector(strengthText, type, index);
                });
                
                // å…¶ä»–å­—æ®µç±»ä¼¼...
            }
            
            // åˆ é™¤è¡Œ
            const deleteBtn = row.querySelector('.delete-row');
            deleteBtn.addEventListener('click', function() {
                const type = this.dataset.type;
                const index = parseInt(this.dataset.index);
                
                const data = loadData();
                data[type].splice(index, 1);
                saveData(data);
                renderTables();
                showNotification('æ¡ç›®å·²åˆ é™¤');
            });
        }

        // æ˜¾ç¤ºå¼ºåº¦é€‰æ‹©å™¨
        function showStrengthSelector(strengthElement, type, index) {
            document.querySelectorAll('.strength-selector').forEach(selector => {
                selector.remove();
            });
            
            const selector = document.createElement('div');
            selector.className = 'strength-selector';
            selector.innerHTML = strengthOptions.map(option => `
                <div class="strength-option" data-value="${option}">${option}</div>
            `).join('');
            
            const rect = strengthElement.getBoundingClientRect();
            selector.style.position = 'fixed';
            selector.style.top = `${rect.bottom + window.scrollY}px`;
            selector.style.left = `${rect.left + window.scrollX}px`;
            
            document.body.appendChild(selector);
            
            selector.querySelectorAll('.strength-option').forEach(option => {
                option.addEventListener('click', function() {
                    const newStrength = this.dataset.value;
                    strengthElement.textContent = newStrength;
                    
                    const data = loadData();
                    data[type][index].strength = newStrength;
                    saveData(data);
                    
                    selector.remove();
                    showNotification('å¼ºåº¦å·²æ›´æ–°');
                });
            });
            
            const closeSelector = (e) => {
                if (!selector.contains(e.target)) {
                    selector.remove();
                    document.removeEventListener('click', closeSelector);
                }
            };
            
            setTimeout(() => {
                document.addEventListener('click', closeSelector);
            }, 100);
        }

        // æ›´æ–°é€‰æ‹©ä¿¡æ¯
        function updateSelectionInfo() {
            const selectedCount = document.querySelectorAll('.row-selector:checked').length;
            document.getElementById('selectionInfo').textContent = `å·²é€‰æ‹© ${selectedCount} ä¸ªæ¡ç›®`;
        }

        // æ‰¹é‡æ“ä½œåŠŸèƒ½
        function setupBatchOperations() {
            document.getElementById('selectAllBtn').addEventListener('click', function() {
                const visibleSection = getVisibleSection();
                if (!visibleSection) return;
                
                const type = visibleSection.id.replace('-section', '');
                const selectors = document.querySelectorAll(`.row-selector[data-type="${type}"]`);
                const allSelected = selectors.length > 0 && Array.from(selectors).every(s => s.checked);
                
                selectors.forEach(selector => {
                    selector.checked = !allSelected;
                });
                updateSelectionInfo();
                showNotification(`å·²${!allSelected ? 'å…¨é€‰' : 'å–æ¶ˆå…¨é€‰'}å½“å‰ç±»åˆ«æ¡ç›®`);
            });
            
            // å…¶ä»–æ‰¹é‡æ“ä½œæŒ‰é’®...
        }

        // è·å–å½“å‰å¯è§çš„ç±»åˆ«
        function getVisibleSection() {
            const sections = document.querySelectorAll('.class-section');
            for (const section of sections) {
                const rect = section.getBoundingClientRect();
                if (rect.top < window.innerHeight && rect.bottom > 0) {
                    return section;
                }
            }
            return null;
        }

        // æ›´æ–°ç¼–è¾‘åŠŸèƒ½çŠ¶æ€
        function updateEditability() {
            const isDevMode = document.body.classList.contains('dev-mode');
            const editables = document.querySelectorAll('.editable');
            
            editables.forEach(editable => {
                if (isDevMode) {
                    editable.style.cursor = 'pointer';
                } else {
                    editable.style.cursor = 'default';
                }
            });
        }

        // ç»‘å®šé¢œè‰²é€‰æ‹©å™¨äº‹ä»¶
        function bindColorPickerEvents() {
            document.querySelectorAll('.attr-item').forEach(attrItem => {
                attrItem.replaceWith(attrItem.cloneNode(true));
            });
            
            document.querySelectorAll('.attr-item').forEach(attrItem => {
                attrItem.addEventListener('contextmenu', function(e) {
                    e.preventDefault();
                    showColorPicker(this);
                });
            });
        }

        // æ˜¾ç¤ºé¢œè‰²é€‰æ‹©å™¨
        function showColorPicker(attrElement) {
            document.querySelectorAll('.color-picker').forEach(picker => {
                picker.remove();
            });
            
            const attrText = attrElement.dataset.text;
            const colorPicker = document.createElement('div');
            colorPicker.className = 'color-picker';
            colorPicker.innerHTML = `
                <div class="color-options">
                    ${colorOptions.map(color => `
                        <div class="color-option" 
                             style="background-color: ${color.value}" 
                             data-color="${color.value}"></div>
                    `).join('')}
                </div>
            `;
            
            const rect = attrElement.getBoundingClientRect();
            colorPicker.style.position = 'fixed';
            colorPicker.style.top = `${rect.bottom + window.scrollY}px`;
            colorPicker.style.left = `${rect.left + window.scrollX}px`;
            
            document.body.appendChild(colorPicker);
            
            colorPicker.querySelectorAll('.color-option').forEach(option => {
                option.addEventListener('click', function() {
                    const newColor = this.dataset.color;
                    updateAttributeColor(attrText, newColor, attrElement);
                    colorPicker.remove();
                });
            });
            
            const closePicker = (e) => {
                if (!colorPicker.contains(e.target)) {
                    colorPicker.remove();
                    document.removeEventListener('click', closePicker);
                }
            };
            
            setTimeout(() => {
                document.addEventListener('click', closePicker);
            }, 100);
        }

        // æ›´æ–°å±æ€§é¢œè‰²
        function updateAttributeColor(attrText, newColor, attrElement) {
            const row = attrElement.closest('tr');
            const type = row.querySelector('.delete-row').dataset.type;
            const index = parseInt(row.querySelector('.delete-row').dataset.index);
            
            const data = loadData();
            const character = data[type][index];
            
            const attrIndex = character.attributes.findIndex(attr => attr.text === attrText);
            if (attrIndex !== -1) {
                character.attributes[attrIndex].color = newColor;
                saveData(data);
                renderTables();
                showNotification('é¢œè‰²å·²æ›´æ–°');
            }
        }

        // ä¿å­˜ç¼–è¾‘
        function saveEdit(input, type, index, field) {
            const textElement = input.previousElementSibling;
            const newValue = input.value;
            
            textElement.textContent = newValue;
            input.style.display = 'none';
            textElement.style.display = 'inline';
            
            const data = loadData();
            data[type][index][field] = newValue;
            
            saveData(data);
        }

        // å–æ¶ˆç¼–è¾‘
        function cancelEdit(input) {
            const textElement = input.previousElementSibling;
            input.style.display = 'none';
            textElement.style.display = 'inline';
        }

        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 2000);
        }

        // å¯¼èˆªåŠŸèƒ½
        function setupNavigation() {
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const targetId = this.dataset.target;
                    const targetSection = document.getElementById(targetId);
                    
                    if (targetSection) {
                        targetSection.scrollIntoView({ 
                            behavior: 'smooth',
                            block: 'start'
                        });
                        
                        targetSection.style.boxShadow = '0 0 0 3px rgba(74, 157, 227, 0.5)';
                        setTimeout(() => {
                            targetSection.style.boxShadow = '';
                        }, 1000);
                    }
                });
            });
        }

        // æ›´æ–°æ¿å—åˆ—è¡¨
        function updateSectionList() {
            const sectionList = document.getElementById('sectionList');
            if (!sectionList) return;
            
            sectionList.innerHTML = '';
            
            document.querySelectorAll('.class-section').forEach(section => {
                const sectionId = section.id;
                const sectionName = section.querySelector('.class-header span').textContent;
                const isVisible = !section.classList.contains('hidden');
                
                const sectionItem = document.createElement('div');
                sectionItem.className = 'section-item';
                sectionItem.draggable = true;
                sectionItem.dataset.sectionId = sectionId;
                
                sectionItem.innerHTML = `
                    <input type="checkbox" class="section-toggle" ${isVisible ? 'checked' : ''}>
                    <span>${sectionName}</span>
                `;
                
                sectionList.appendChild(sectionItem);
                
                // æ˜¾ç¤º/éšè—åˆ‡æ¢
                const toggle = sectionItem.querySelector('.section-toggle');
                toggle.addEventListener('change', function() {
                    if (this.checked) {
                        section.classList.remove('hidden');
                    } else {
                        section.classList.add('hidden');
                    }
                });
            });
        }

        // å¢å¼ºçš„å¼€å‘è€…æ¨¡å¼åŠŸèƒ½
        function setupEnhancedDevMode() {
            const devModeBtn = document.getElementById('devModeBtn');
            const devTools = document.getElementById('devTools');
            let devModeActive = false;
            
            devModeBtn.addEventListener('click', function() {
                devModeActive = !devModeActive;
                
                if (devModeActive) {
                    document.body.classList.add('dev-mode');
                    devTools.style.display = 'block';
                    this.classList.add('active');
                    this.textContent = 'å¼€å‘è€…æ¨¡å¼ (å¼€)';
                    showNotification('å¼€å‘è€…æ¨¡å¼å·²å¼€å¯ - å…¨èƒ½ç¼–è¾‘æ¨¡å¼å¯åŠ¨');
                } else {
                    document.body.classList.remove('dev-mode');
                    devTools.style.display = 'none';
                    this.classList.remove('active');
                    this.textContent = 'å¼€å‘è€…æ¨¡å¼';
                    showNotification('å¼€å‘è€…æ¨¡å¼å·²å…³é—­ - è¿›å…¥åªè¯»æ¨¡å¼');
                }
                
                updateEditability();
                updateSectionList();
            });
            
            // æ ‡ç­¾é¡µåˆ‡æ¢
            document.querySelectorAll('.dev-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.dataset.tab;
                    
                    // æ›´æ–°æ´»åŠ¨æ ‡ç­¾
                    document.querySelectorAll('.dev-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // æ›´æ–°å†…å®¹æ˜¾ç¤º
                    document.querySelectorAll('.dev-tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(`${tabName}-tab`).classList.add('active');
                });
            });
            
            // æ·»åŠ æ–°æ¿å—
            document.getElementById('addSectionBtn').addEventListener('click', function() {
                const sectionName = prompt('è¯·è¾“å…¥æ–°æ¿å—åç§°:', 'æ–°æ¿å—');
                if (sectionName) {
                    showNotification('æ–°æ¿å—åŠŸèƒ½å¼€å‘ä¸­...');
                }
            });
            
            // æ ·å¼æ§åˆ¶
            const bgColorInput = document.getElementById('bgColor');
            const fontSizeInput = document.getElementById('fontSize');
            const fontFamilySelect = document.getElementById('fontFamily');
            const titleColorInput = document.getElementById('titleColor');
            const textColorInput = document.getElementById('textColor');
            const linkColorInput = document.getElementById('linkColor');
            
            loadDevSettings();
            
            bgColorInput.addEventListener('change', function() {
                document.body.style.background = this.value;
                saveDevSettings();
            });
            
            fontSizeInput.addEventListener('input', function() {
                document.body.style.fontSize = this.value + 'px';
                saveDevSettings();
            });
            
            fontFamilySelect.addEventListener('change', function() {
                document.body.style.fontFamily = this.value;
                saveDevSettings();
            });
            
            titleColorInput.addEventListener('change', function() {
                document.querySelector('h1').style.color = this.value;
                saveDevSettings();
            });
            
            textColorInput.addEventListener('change', function() {
                document.body.style.color = this.value;
                saveDevSettings();
            });
            
            linkColorInput.addEventListener('change', function() {
                document.querySelector('.subtitle').style.color = this.value;
                saveDevSettings();
            });
            
            // åŠŸèƒ½å¼€å…³
            document.getElementById('autoLinkToggle').addEventListener('change', function() {
                showNotification(this.checked ? 'é“¾æ¥è¯†åˆ«å·²å¼€å¯' : 'é“¾æ¥è¯†åˆ«å·²å…³é—­');
            });
            
            // é‡ç½®è®¾ç½®
            document.getElementById('devReset').addEventListener('click', function() {
                if (confirm('ç¡®å®šè¦é‡ç½®æ‰€æœ‰è®¾ç½®å—ï¼Ÿ')) {
                    document.body.style.background = '';
                    document.body.style.fontSize = '';
                    document.body.style.fontFamily = '';
                    document.body.style.color = '';
                    document.querySelector('h1').style.color = '';
                    document.querySelector('.subtitle').style.color = '';
                    
                    bgColorInput.value = '#1a2a3a';
                    fontSizeInput.value = '16';
                    fontFamilySelect.value = "'Segoe UI', 'Microsoft YaHei', sans-serif";
                    titleColorInput.value = '#4a9de3';
                    textColorInput.value = '#e0e0e0';
                    linkColorInput.value = '#a0c8f0';
                    
                    localStorage.removeItem('devSettings');
                    showNotification('æ‰€æœ‰è®¾ç½®å·²é‡ç½®');
                }
            });
            
            function saveDevSettings() {
                const settings = {
                    bgColor: bgColorInput.value,
                    fontSize: fontSizeInput.value,
                    fontFamily: fontFamilySelect.value,
                    titleColor: titleColorInput.value,
                    textColor: textColorInput.value,
                    linkColor: linkColorInput.value
                };
                localStorage.setItem('devSettings', JSON.stringify(settings));
            }
            
            function loadDevSettings() {
                const savedSettings = localStorage.getItem('devSettings');
                if (savedSettings) {
                    const settings = JSON.parse(savedSettings);
                    
                    bgColorInput.value = settings.bgColor;
                    fontSizeInput.value = settings.fontSize;
                    fontFamilySelect.value = settings.fontFamily;
                    titleColorInput.value = settings.titleColor;
                    textColorInput.value = settings.textColor;
                    linkColorInput.value = settings.linkColor;
                    
                    document.body.style.background = settings.bgColor;
                    document.body.style.fontSize = settings.fontSize + 'px';
                    document.body.style.fontFamily = settings.fontFamily;
                    document.body.style.color = settings.textColor;
                    document.querySelector('h1').style.color = settings.titleColor;
                    document.querySelector('.subtitle').style.color = settings.linkColor;
                }
            }
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            renderTables();
            setupNavigation();
            setupEnhancedDevMode();
            setupBatchOperations();
            
            // æ·»åŠ æŒ‰é’®äº‹ä»¶
            document.querySelectorAll('.add-character').forEach(btn => {
                btn.addEventListener('click', function() {
                    if (!document.body.classList.contains('dev-mode')) {
                        showNotification('è¯·åœ¨å¼€å‘è€…æ¨¡å¼ä¸‹æ·»åŠ æ¡ç›®');
                        return;
                    }
                    
                    const type = this.dataset.type;
                    const data = loadData();
                    
                    if (!data[type]) {
                        data[type] = [];
                    }
                    
                    if (type === 'tips' || type === 'navigation') {
                        data[type].push({
                            name: `æ–°${getTypeName(type)}`,
                            notes: "è¯·è¾“å…¥å†…å®¹"
                        });
                    } else {
                        data[type].push({
                            name: `æ–°${getTypeName(type)}è§’è‰²`,
                            weapon: "æœªè®¾ç½®",
                            strength: "B",
                            training: "æœªè®¾ç½®",
                            knowledge: "æœªè®¾ç½®",
                            glory: "æœªè®¾ç½®",
                            attributes: [
                                { text: "ç¤ºä¾‹", color: "#ff6b6b" }
                            ],
                            notes: ""
                        });
                    }
                    
                    saveData(data);
                    renderTables();
                    showNotification('æ–°æ¡ç›®å·²æ·»åŠ ');
                });
            });
            
            function getTypeName(type) {
                const names = {
                    strategy: 'æˆ˜ç•¥',
                    ranged: 'è¿œå‡»',
                    magic: 'æ„æœ¯',
                    light: 'è½»é”',
                    guard: 'å®¿å«',
                    tips: 'æ³¨æ„äº‹é¡¹',
                    navigation: 'è§„åˆ™'
                };
                return names[type] || 'æœªçŸ¥';
            }
        });
    </script>
</body>
</html>
