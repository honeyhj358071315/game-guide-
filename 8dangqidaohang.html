
<!-- saved from url=(0058)file:///F:/WHMIsite/8dangqidaohang.html#navigation-section -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–°æ‰‹å¯¼èˆª - æ‡’äººèººå¹³æ”»ç•¥</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a3a 0%, #0d1b2a 100%);
            color: #e0e0e0;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .page-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: rgba(16, 36, 54, 0.8);
            border-radius: 15px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            border-left: 6px solid #ffc107;
        }

        .page-header h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: #ffc107;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .page-header .subtitle {
            font-size: 1.2rem;
            color: #a0c8f0;
            margin-bottom: 20px;
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 193, 7, 0.3);
            border: 2px solid #ffc107;
            border-radius: 8px;
            color: #fff;
            padding: 12px 25px;
            font-size: 1.1rem;
            text-decoration: none;
            transition: all 0.3s;
            margin-top: 15px;
        }

        .back-btn:hover {
            background: rgba(255, 193, 7, 0.5);
            transform: translateY(-2px);
        }

        /* å¼€å‘è€…æ¨¡å¼æŒ‰é’® */
        .dev-mode-btn,
        .save-all-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 193, 7, 0.8);
            border: none;
            border-radius: 5px;
            color: #333;
            padding: 8px 15px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s;
            display: none;
        }

        .buttons-visible .dev-mode-btn,
        .buttons-visible .save-all-btn {
            display: block;
        }

        .dev-mode-btn:hover,
        .save-all-btn:hover {
            background: rgba(255, 193, 7, 1);
            transform: scale(1.05);
        }

        .dev-mode-btn.active {
            background: rgba(76, 175, 80, 0.8);
            color: white;
        }

        .save-all-btn {
            right: 160px;
            background: rgba(76, 217, 100, 0.8);
            color: #fff;
        }

        .save-all-btn:hover {
            background: rgba(76, 217, 100, 1);
        }

        /* å¼€å‘è€…å·¥å…·é¢æ¿ */
        .dev-tools {
            display: none;
            position: fixed;
            top: 60px;
            right: 20px;
            background: rgba(30, 40, 50, 0.95);
            border-radius: 5px;
            padding: 15px;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            width: 300px;
        }

        .dev-mode .dev-tools {
            display: block;
        }

        .dev-tools h3 {
            margin-bottom: 15px;
            color: #ffc107;
            text-align: center;
        }

        .dev-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .batch-btn {
            background: rgba(255, 193, 7, 0.7);
            border: none;
            border-radius: 4px;
            color: #333;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .batch-btn:hover {
            background: rgba(255, 193, 7, 0.9);
        }

        .batch-btn.delete {
            background: rgba(255, 107, 107, 0.7);
            color: #fff;
        }

        .batch-btn.delete:hover {
            background: rgba(255, 107, 107, 0.9);
        }

        /* ä¿¡æ¯æ æ¿å—æ ·å¼ */
        .tips-section {
            margin-bottom: 30px;
            background: rgba(16, 36, 54, 0.8);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            position: relative;
            transition: all 0.3s;
            border-left: 6px solid #ffc107;
        }

        .tips-header {
            padding: 20px;
            font-size: 1.8rem;
            font-weight: bold;
            background: rgba(44, 62, 80, 0.9);
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: #ffc107;
        }

        .add-tip {
            background: rgba(107, 207, 127, 0.3);
            border: none;
            border-radius: 5px;
            color: #fff;
            padding: 8px 15px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
            display: none;
        }

        .dev-mode .add-tip {
            display: inline-block;
        }

        .add-tip:hover {
            background: rgba(107, 207, 127, 0.5);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
        }

        th {
            background: rgba(50, 70, 90, 0.9);
            padding: 8px 6px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid rgba(255, 193, 7, 0.5);
            color: #ffc107;
        }

        td {
            padding: 8px 6px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            vertical-align: top;
        }

        tr:nth-child(even) {
            background: rgba(30, 50, 70, 0.4);
        }

        tr:hover {
            background: rgba(60, 80, 100, 0.3);
        }

        /* åˆ—å®½è®¾ç½® */
        th:nth-child(1),
        td:nth-child(1) {
            width: 40px;
        }

        th:nth-child(2),
        td:nth-child(2) {
            width: 300px;
        }

        th:nth-child(3),
        td:nth-child(3) {
            width: 900px;
        }

        th:nth-child(4),
        td:nth-child(4) {
            width: 30px;
        }

        .editable {
            cursor: pointer;
            padding: 5px 8px;
            border-radius: 4px;
            position: relative;
            min-height: 30px;
            display: flex;
            align-items: flex-start;
        }

        .dev-mode .editable:hover {
            background: rgba(255, 255, 255, 0.05);
            outline: 1px dashed #ffc107;
        }

        .edit-input {
            display: none;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            color: #fff;
            padding: 5px 8px;
            font-size: inherit;
            font-family: inherit;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 10;
        }

        .edit-input:focus {
            outline: none;
            border-color: #ffc107;
            box-shadow: 0 0 0 2px rgba(255, 193, 7, 0.3);
        }

        .delete-row {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 107, 107, 0.3);
            border: none;
            border-radius: 3px;
            color: #fff;
            width: 20px;
            height: 20px;
            font-size: 0.7rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
            display: none;
        }

        .dev-mode .delete-row {
            display: flex;
        }

        tr:hover .delete-row {
            opacity: 1;
        }

        .delete-row:hover {
            background: rgba(255, 107, 107, 0.5);
        }

        /* ä¿¡æ¯æ ç‰¹å®šæ ·å¼ */
        .tip-title {
            color: #4a9de3;
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .tip-content {
            color: #e0e0e0;
            line-height: 1.5;
            white-space: pre-line;
        }

        .row-number {
            display: inline-block;
            width: 30px;
            text-align: center;
            font-weight: bold;
            color: #ffc107;
            cursor: pointer;
            transition: all 0.3s;
            padding: 2px 5px;
            border-radius: 3px;
        }

        .dev-mode .row-number:hover {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 0.1);
            border: 1px dashed #ffc107;
        }

        .dropdown-control {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: rgba(44, 62, 80, 0.7);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .dropdown-info {
            font-size: 1rem;
            color: #a0c8f0;
        }

        .dropdown-btn {
            background: rgba(255, 193, 7, 0.5);
            border: none;
            border-radius: 6px;
            color: #333;
            padding: 8px 15px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .dropdown-btn:hover {
            background: rgba(255, 193, 7, 0.7);
        }

        .dropdown-setting {
            display: none;
        }

        .dev-mode .dropdown-setting {
            display: inline-block;
        }

        .dropdown-setting input {
            width: 50px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 3px;
            color: white;
            padding: 3px 5px;
            margin-left: 5px;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 25px;
            color: #a0c8f0;
            font-size: 0.95rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(107, 207, 127, 0.9);
            color: #fff;
            padding: 10px 15px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 1000;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                width: 100%;
            }

            .page-header h1 {
                font-size: 2rem;
            }

            table {
                width: 100%;
                min-width: 600px;
                table-layout: fixed;
            }

            th,
            td {
                padding: 6px 4px;
                font-size: 0.9rem;
            }

            .dropdown-control {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .dev-tools {
                width: 90%;
                right: 5%;
            }

            .save-all-btn {
                right: 140px;
            }

            .tips-section {
                overflow-x: auto;
            }
        }
    </style>
</head>

<body class="">
    <button class="dev-mode-btn" id="devModeBtn">å¼€å‘è€…æ¨¡å¼</button>
    <div class="notification" id="notification" style="display: none;">ğŸ”§ å¼€å‘è€…æŒ‰é’®å·²éšè—</div>

    <div class="dev-tools" id="devTools">
        <h3>æ•°æ®ç®¡ç†</h3>
        <div class="dev-controls">
            <button class="batch-btn" id="exportDataBtn">å¯¼å‡ºJSONæ•°æ®</button>
            <button class="batch-btn" id="importDataBtn">å¯¼å…¥JSONæ•°æ®</button>
            <button class="batch-btn" id="duplicateSectionBtn">å¤åˆ¶å½“å‰æ¿å—</button>
            <button class="batch-btn delete" id="clearDataBtn">æ¸…ç©ºæ‰€æœ‰æ•°æ®</button>
        </div>
    </div>

    <div class="container">
        <div class="page-header">
            <h1>ğŸ§± æœªå®Œå·¥</h1>
            <div class="subtitle">ğŸ§±</div>
            <a href="F:\WHMIsite/index.html" class="back-btn">
                <span>ğŸ </span> è¿”å›å¯¼èˆªé¦–é¡µ
            </a>
        </div>

        <section class="tips-section" id="tips-section-1">
            <div class="tips-header">
                <span>æ–°æ‰‹æ³¨æ„äº‹é¡¹</span>
                <button class="add-tip" data-section="tips-section-1">+ æ·»åŠ æ³¨æ„äº‹é¡¹</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>åºå·</th>
                        <th>æ³¨æ„äº‹é¡¹</th>
                        <th>è¯¦ç»†è¯´æ˜</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="tips-section-1-tbody"></tbody>
            </table>
            <div class="dropdown-control">
                <div class="dropdown-info">
                    æ˜¾ç¤º <span class="current-count">0</span> / <span class="total-count">0</span> æ¡æ³¨æ„äº‹é¡¹
                </div>
                <div>
                    <button class="dropdown-btn show-more-btn" style="display: none;">æ˜¾ç¤ºæ›´å¤š</button>
                    <button class="dropdown-btn show-less-btn" style="display: none;">æ˜¾ç¤ºæ›´å°‘</button>
                    <span class="dropdown-setting">
                        æ˜¾ç¤ºæ•°é‡: <input type="number" class="dropdown-input" min="1" max="50" value="5">
                    </span>
                </div>
            </div>
        </section>

        <footer>
            <p>æ¸©é¦¨æç¤ºï¼šä»¥ä¸Šå†…å®¹ä¸ºç©å®¶ç»éªŒæ€»ç»“ï¼Œå®é™…æ¸¸æˆä½“éªŒå¯èƒ½å› ç‰ˆæœ¬æ›´æ–°å’Œä¸ªäººç©æ³•è€Œæœ‰æ‰€ä¸åŒ</p>
            <p style="margin-top: 15px; color: #ff6b6b;">âš ï¸ æ•°æ®ä»…ä¾›å‚è€ƒï¼Œè¯·ä»¥æ¸¸æˆå†…å®é™…æƒ…å†µä¸ºå‡†</p>
        </footer>
    </div>

    <script>
        // åŒå‡»æ˜¾ç¤º/éšè—æŒ‰é’®åŠŸèƒ½
        function setupToggleButtons() {
            let clickCount = 0;
            let clickTimer;

            document.addEventListener('click', function (e) {
                if (e.clientY < 50) {
                    clickCount++;

                    if (clickCount === 1) {
                        clickTimer = setTimeout(() => {
                            clickCount = 0;
                        }, 500);
                    } else if (clickCount === 2) {
                        clearTimeout(clickTimer);
                        clickCount = 0;

                        document.body.classList.toggle('buttons-visible');
                        const isVisible = document.body.classList.contains('buttons-visible');
                        showNotification(isVisible ? 'ğŸ”§ å¼€å‘è€…æŒ‰é’®å·²æ˜¾ç¤º' : 'ğŸ”§ å¼€å‘è€…æŒ‰é’®å·²éšè—');
                    }
                } else {
                    clickCount = 0;
                }
            });
        }

        // å¼€å‘è€…æ¨¡å¼åˆ‡æ¢
        const devModeBtn = document.getElementById('devModeBtn');
        let devModeActive = false;

        devModeBtn.addEventListener('click', function () {
            devModeActive = !devModeActive;
            document.body.classList.toggle('dev-mode');

            if (devModeActive) {
                this.classList.add('active');
                this.textContent = 'å¼€å‘è€…æ¨¡å¼ (å¼€)';
                showNotification('å¼€å‘è€…æ¨¡å¼å·²å¼€å¯ - å¯ä»¥ç¼–è¾‘å†…å®¹');
            } else {
                this.classList.remove('active');
                this.textContent = 'å¼€å‘è€…æ¨¡å¼';
                showNotification('å¼€å‘è€…æ¨¡å¼å·²å…³é—­');
            }

            bindAllEditEvents();
            initDropdowns();
        });

        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';

            setTimeout(() => {
                notification.style.display = 'none';
            }, 2000);
        }

        // è‡ªåŠ¨è¯†åˆ«é“¾æ¥å¹¶è½¬æ¢ä¸ºå¯ç‚¹å‡»é“¾æ¥
        function autoLink(text) {
            if (!text) return '';

            // åŒ¹é…URLæ­£åˆ™è¡¨è¾¾å¼
            const urlRegex = /(https?:\/\/[^\s]+|www\.[^\s]+|[^\s]+\.[^\s]{2,})/gi;

            return text.replace(urlRegex, function (url) {
                let href = url;
                if (!url.startsWith('http://') && !url.startsWith('https://')) {
                    href = 'https://' + url;
                }
                return '<a href="' + href + '" target="_blank" rel="noopener noreferrer" style="color: #6bcf7f; text-decoration: none; border-bottom: 1px dotted #6bcf7f;">' + url + '</a>';
            });
        }

        // å¤åˆ¶æ¿å—åŠŸèƒ½
        document.getElementById('duplicateSectionBtn').addEventListener('click', function () {
            if (!devModeActive) {
                showNotification('è¯·å…ˆå¼€å¯å¼€å‘è€…æ¨¡å¼');
                return;
            }

            duplicateCurrentSection();
        });

        function duplicateCurrentSection() {
            // è·å–æ‰€æœ‰æ¿å—
            const sections = document.querySelectorAll('.tips-section');
            const currentSection = sections[sections.length - 1];

            if (!currentSection) {
                showNotification('æ²¡æœ‰æ‰¾åˆ°å¯å¤åˆ¶çš„æ¿å—');
                return;
            }

            // æ·±æ‹·è´æ¿å—
            const clone = currentSection.cloneNode(true);

            // ç”Ÿæˆæ–°ID
            const newId = 'tips-section-' + Date.now();
            clone.id = newId;

            // ä¿®æ”¹æ ‡é¢˜
            const header = clone.querySelector('.tips-header span');
            const originalTitle = header.textContent;
            header.textContent = originalTitle + ' (å‰¯æœ¬)';

            // æ›´æ–°æ·»åŠ æŒ‰é’®çš„data-section
            const addButton = clone.querySelector('.add-tip');
            if (addButton) {
                addButton.dataset.section = newId;
            }

            // æ›´æ–°tbodyçš„ID
            const tbody = clone.querySelector('tbody');
            if (tbody) {
                tbody.id = newId + '-tbody';
            }

            // æ¸…ç©ºè¡¨æ ¼æ•°æ®ä½†ä¿ç•™è¡¨å¤´
            if (tbody) {
                tbody.innerHTML = '';
            }

            // é‡ç½®æ˜¾ç¤ºè®¡æ•°
            const currentCount = clone.querySelector('.current-count');
            const totalCount = clone.querySelector('.total-count');
            if (currentCount) currentCount.textContent = '0';
            if (totalCount) totalCount.textContent = '0';

            // æ’å…¥åˆ°å½“å‰æ¿å—åé¢
            currentSection.after(clone);

            // é‡æ–°ç»‘å®šæ–°æ¿å—çš„äº‹ä»¶
            bindSectionEvents(clone);

            showNotification('æ–°æ¿å—å·²åˆ›å»ºï¼Œè¯·ä¿®æ”¹æ ‡é¢˜å’Œå†…å®¹');
        }

        // ç»‘å®šæ¿å—äº‹ä»¶
        function bindSectionEvents(section) {
            const addButton = section.querySelector('.add-tip');
            const tbody = section.querySelector('tbody');

            if (addButton && tbody) {
                // ç§»é™¤æ—§äº‹ä»¶ï¼Œç»‘å®šæ–°äº‹ä»¶
                const newAddButton = addButton.cloneNode(true);
                addButton.parentNode.replaceChild(newAddButton, addButton);

                newAddButton.addEventListener('click', function () {
                    if (!devModeActive) {
                        showNotification('è¯·å…ˆå¼€å¯å¼€å‘è€…æ¨¡å¼');
                        return;
                    }

                    const rowCount = tbody.querySelectorAll('tr').length;
                    const newRow = createNewTipRow(rowCount);
                    tbody.appendChild(newRow);
                    bindRowEvents(newRow);
                    updateRowNumbersInSection(section);
                    initDropdowns();
                    showNotification('æ–°æ³¨æ„äº‹é¡¹å·²æ·»åŠ åˆ°æ–°æ¿å—');
                });
            }

            // é‡æ–°åˆå§‹åŒ–ä¸‹æ‹‰æ§åˆ¶
            initDropdowns();
        }

        // åˆ›å»ºæ–°è¡Œ
        function createNewTipRow(index) {
            const newRow = document.createElement('tr');
            newRow.dataset.type = 'tips';
            newRow.dataset.index = index;

            newRow.innerHTML = `
                <td>
                    <div class="editable">
                        <span class="row-number">${index + 1}.</span>
                        <input type="text" class="edit-input number-edit" value="${index + 1}">
                    </div>
                </td>
                <td>
                    <div class="editable">
                        <span class="tip-title">æ–°æ³¨æ„äº‹é¡¹</span>
                        <input type="text" class="edit-input title-edit" value="æ–°æ³¨æ„äº‹é¡¹">
                    </div>
                    <button class="delete-row">Ã—</button>
                </td>
                <td>
                    <div class="editable">
                        <span class="tip-content">è¯·è¾“å…¥è¯¦ç»†è¯´æ˜å†…å®¹...</span>
                        <textarea class="edit-input content-edit">è¯·è¾“å…¥è¯¦ç»†è¯´æ˜å†…å®¹...</textarea>
                    </div>
                </td>
                <td></td>
            `;

            return newRow;
        }

        // æ›´æ–°æŒ‡å®šæ¿å—çš„è¡Œå·
        function updateRowNumbersInSection(section) {
            const rows = section.querySelectorAll('tbody tr');
            rows.forEach((row, index) => {
                const numberElement = row.querySelector('.row-number');
                const numberInput = row.querySelector('.number-edit');
                if (numberElement && numberInput) {
                    numberElement.textContent = numberInput.value + '.';
                    row.dataset.index = index;
                }
            });
        }

        // æ·»åŠ æ³¨æ„äº‹é¡¹ï¼ˆåŸæœ‰åŠŸèƒ½ï¼‰
        document.querySelectorAll('.add-tip').forEach(button => {
            button.addEventListener('click', function () {
                if (!devModeActive) {
                    showNotification('è¯·å…ˆå¼€å¯å¼€å‘è€…æ¨¡å¼');
                    return;
                }

                const sectionId = this.dataset.section;
                const tbody = document.getElementById(sectionId + '-tbody');
                const rowCount = tbody.querySelectorAll('tr').length;
                const newIndex = rowCount;

                const newRow = document.createElement('tr');
                newRow.dataset.type = 'tips';
                newRow.dataset.index = newIndex;

                newRow.innerHTML = `
                    <td>
                        <div class="editable">
                            <span class="row-number">${rowCount + 1}.</span>
                            <input type="text" class="edit-input number-edit" value="${rowCount + 1}">
                        </div>
                    </td>
                    <td>
                        <div class="editable">
                            <span class="tip-title">æ–°æ³¨æ„äº‹é¡¹</span>
                            <input type="text" class="edit-input title-edit" value="æ–°æ³¨æ„äº‹é¡¹">
                        </div>
                        <button class="delete-row">Ã—</button>
                    </td>
                    <td>
                        <div class="editable">
                            <span class="tip-content">è¯·è¾“å…¥è¯¦ç»†è¯´æ˜å†…å®¹...</span>
                            <textarea class="edit-input content-edit">è¯·è¾“å…¥è¯¦ç»†è¯´æ˜å†…å®¹...</textarea>
                        </div>
                    </td>
                    <td></td>
                `;

                tbody.appendChild(newRow);
                bindRowEvents(newRow);
                updateRowNumbers();
                initDropdowns();
                showNotification('æ–°æ³¨æ„äº‹é¡¹å·²æ·»åŠ ');
            });
        });

        // ç»‘å®šè¡Œäº‹ä»¶
        function bindRowEvents(row) {
            const deleteBtn = row.querySelector('.delete-row');
            if (deleteBtn) {
                deleteBtn.addEventListener('click', function (e) {
                    e.stopPropagation();
                    if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ³¨æ„äº‹é¡¹å—ï¼Ÿ')) {
                        row.remove();
                        updateRowNumbers();
                        initDropdowns();
                        showNotification('æ³¨æ„äº‹é¡¹å·²åˆ é™¤');
                    }
                });
            }

            // ç»‘å®šæ‰€æœ‰å¯ç¼–è¾‘å­—æ®µ
            const editables = row.querySelectorAll('.editable');
            editables.forEach(editable => {
                setupEditEvent(editable);
            });
        }

        // è®¾ç½®ç¼–è¾‘äº‹ä»¶
        function setupEditEvent(editable) {
            const textElement = editable.querySelector('span:first-child');
            const inputElement = editable.querySelector('.edit-input');

            if (!textElement || !inputElement) return;

            editable.addEventListener('click', function (e) {
                if (!devModeActive) return;
                e.stopPropagation();

                textElement.style.display = 'none';
                inputElement.style.display = 'block';
                inputElement.focus();

                // å¯¹äºtextareaï¼Œè‡ªåŠ¨è°ƒæ•´é«˜åº¦
                if (inputElement.tagName === 'TEXTAREA') {
                    inputElement.style.height = 'auto';
                    inputElement.style.height = inputElement.scrollHeight + 'px';
                } else {
                    inputElement.select();
                }
            });

            inputElement.addEventListener('blur', function () {
                saveEdit(this);
            });

            inputElement.addEventListener('keydown', function (e) {
                if (e.key === 'Enter' && this.tagName !== 'TEXTAREA') {
                    saveEdit(this);
                }
                if (e.key === 'Escape') {
                    cancelEdit(this);
                }
            });

            // è‡ªåŠ¨è°ƒæ•´textareaé«˜åº¦
            if (inputElement.tagName === 'TEXTAREA') {
                inputElement.addEventListener('input', function () {
                    this.style.height = 'auto';
                    this.style.height = this.scrollHeight + 'px';
                });
            }
        }

        // ä¿å­˜ç¼–è¾‘
        function saveEdit(input) {
            const textElement = input.previousElementSibling;
            let newValue = input.value;

            if (input.classList.contains('content-edit')) {
                // è‡ªåŠ¨è¯†åˆ«é“¾æ¥å¹¶è½¬æ¢ä¸ºå¯ç‚¹å‡»é“¾æ¥
                const linkedText = autoLink(newValue);
                textElement.innerHTML = linkedText.replace(/\n/g, '<br>');
            } else if (input.classList.contains('number-edit')) {
                // å¦‚æœæ˜¯åºå·ç¼–è¾‘ï¼ŒéªŒè¯æ•°å­—
                const newNumber = parseInt(newValue);
                if (!isNaN(newNumber) && newNumber > 0) {
                    textElement.textContent = newValue + '.';
                    // å»¶è¿Ÿä¸€ç‚¹æ—¶é—´åæ’åºï¼Œè®©ç”¨æˆ·çœ‹åˆ°ä¿®æ”¹æ•ˆæœ
                    setTimeout(sortByNumber, 100);
                } else {
                    // æ•°å­—æ— æ•ˆï¼Œæ¢å¤åŸå€¼
                    textElement.textContent = input.defaultValue + '.';
                    showNotification('åºå·å¿…é¡»æ˜¯å¤§äº0çš„æ•°å­—');
                }
            } else {
                textElement.innerHTML = newValue;
            }

            input.style.display = 'none';
            textElement.style.display = 'inline';

            if (!input.classList.contains('number-edit')) {
                showNotification('å†…å®¹å·²æ›´æ–°');
            }
        }

        // æŒ‰åºå·æ’åº
        function sortByNumber() {
            const sections = document.querySelectorAll('.tips-section');
            sections.forEach(section => {
                const tbody = section.querySelector('tbody');
                if (!tbody) return;

                const rows = Array.from(tbody.querySelectorAll('tr'));

                // æŒ‰åºå·æ•°å­—æ’åº
                rows.sort((a, b) => {
                    const numA = parseInt(a.querySelector('.number-edit').value) || 0;
                    const numB = parseInt(b.querySelector('.number-edit').value) || 0;
                    return numA - numB;
                });

                // é‡æ–°æ’å…¥æ’åº
                rows.forEach(row => tbody.appendChild(row));

                // æ›´æ–°æ˜¾ç¤ºåºå·
                updateRowNumbersInSection(section);
            });

            showNotification('å·²æŒ‰åºå·é‡æ–°æ’åº');
        }

        // å–æ¶ˆç¼–è¾‘
        function cancelEdit(input) {
            const textElement = input.previousElementSibling;
            input.style.display = 'none';
            textElement.style.display = 'inline';
        }

        // æ›´æ–°è¡Œå·æ˜¾ç¤º
        function updateRowNumbers() {
            const sections = document.querySelectorAll('.tips-section');
            sections.forEach(section => {
                updateRowNumbersInSection(section);
            });
        }

        // ç»‘å®šæ‰€æœ‰ç¼–è¾‘äº‹ä»¶
        function bindAllEditEvents() {
            document.querySelectorAll('#tips-tbody tr').forEach(row => {
                bindRowEvents(row);
            });
        }

        // ä¸‹æ‹‰æ˜¾ç¤ºæ§åˆ¶
        function initDropdowns() {
            document.querySelectorAll('.tips-section').forEach(section => {
                const tbody = section.querySelector('tbody');
                if (!tbody) return;

                const rows = tbody.querySelectorAll('tr');
                const totalCount = rows.length;
                const dropdownInput = section.querySelector('.dropdown-input');
                const currentLimit = dropdownInput ? parseInt(dropdownInput.value) : 5;

                // æ›´æ–°æ˜¾ç¤ºæ•°é‡ä¿¡æ¯
                const currentCount = Math.min(currentLimit, totalCount);
                const countElement = section.querySelector('.current-count');
                const totalElement = section.querySelector('.total-count');
                if (countElement) countElement.textContent = currentCount;
                if (totalElement) totalElement.textContent = totalCount;

                // è®¾ç½®æ˜¾ç¤ºæ›´å¤š/æ›´å°‘æŒ‰é’®çŠ¶æ€
                const showMoreBtn = section.querySelector('.show-more-btn');
                const showLessBtn = section.querySelector('.show-less-btn');

                if (totalCount <= currentLimit) {
                    if (showMoreBtn) showMoreBtn.style.display = 'none';
                    if (showLessBtn) showLessBtn.style.display = 'none';
                    rows.forEach(row => row.style.display = '');
                } else {
                    if (showMoreBtn) showMoreBtn.style.display = 'inline-block';
                    if (showLessBtn) showLessBtn.style.display = 'none';
                    rows.forEach((row, index) => {
                        row.style.display = index < currentLimit ? '' : 'none';
                    });
                }

                // æ˜¾ç¤ºæ›´å¤šæŒ‰é’®äº‹ä»¶
                if (showMoreBtn) {
                    showMoreBtn.onclick = function () {
                        rows.forEach(row => row.style.display = '');
                        showMoreBtn.style.display = 'none';
                        if (showLessBtn) showLessBtn.style.display = 'inline-block';
                        if (countElement) countElement.textContent = totalCount;
                    };
                }

                // æ˜¾ç¤ºæ›´å°‘æŒ‰é’®äº‹ä»¶
                if (showLessBtn) {
                    showLessBtn.onclick = function () {
                        const newLimit = dropdownInput ? parseInt(dropdownInput.value) : 5;
                        rows.forEach((row, index) => {
                            row.style.display = index < newLimit ? '' : 'none';
                        });
                        if (showMoreBtn) showMoreBtn.style.display = 'inline-block';
                        showLessBtn.style.display = 'none';
                        const newCount = Math.min(newLimit, totalCount);
                        if (countElement) countElement.textContent = newCount;
                    };
                }

                // ä¸‹æ‹‰è¾“å…¥æ¡†äº‹ä»¶
                if (dropdownInput) {
                    dropdownInput.onchange = function () {
                        if (!devModeActive) return;
                        const newValue = parseInt(this.value);
                        if (newValue > 0 && newValue <= 50) {
                            rows.forEach((row, index) => {
                                row.style.display = index < newValue ? '' : 'none';
                            });
                            const newCount = Math.min(newValue, totalCount);
                            if (countElement) countElement.textContent = newCount;

                            if (totalCount <= newValue) {
                                if (showMoreBtn) showMoreBtn.style.display = 'none';
                                if (showLessBtn) showLessBtn.style.display = 'none';
                            } else {
                                if (showMoreBtn) showMoreBtn.style.display = 'inline-block';
                                if (showLessBtn) showLessBtn.style.display = 'none';
                            }
                        }
                    };
                }
            });
        }

        // ==================== æ•°æ®å¯¼å‡ºå¯¼å…¥åŠŸèƒ½ ====================

        // å¯¼å‡ºæ•°æ®
        document.getElementById('exportDataBtn').addEventListener('click', exportData);

        function exportData() {
            const data = collectAllData();
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });

            const url = URL.createObjectURL(dataBlob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'æ–°æ‰‹å¯¼èˆªæ•°æ®-' + new Date().toISOString().split('T')[0] + '.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            showNotification('æ•°æ®å·²å¯¼å‡ºä¸ºJSONæ–‡ä»¶');
        }

        // å¯¼å…¥æ•°æ®
        document.getElementById('importDataBtn').addEventListener('click', function () {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';

            input.addEventListener('change', function (e) {
                const file = e.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = function (e) {
                    try {
                        const data = JSON.parse(e.target.result);
                        importData(data);
                    } catch (error) {
                        showNotification('å¯¼å…¥å¤±è´¥ï¼šæ–‡ä»¶æ ¼å¼é”™è¯¯');
                        console.error('å¯¼å…¥é”™è¯¯:', error);
                    }
                };
                reader.readAsText(file);
            });

            input.click();
        });

        // æ¸…ç©ºæ•°æ®
        document.getElementById('clearDataBtn').addEventListener('click', function () {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ³¨æ„äº‹é¡¹å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ï¼')) {
                const sections = document.querySelectorAll('.tips-section');
                sections.forEach(section => {
                    const tbody = section.querySelector('tbody');
                    if (tbody) tbody.innerHTML = '';
                });
                initDropdowns();
                showNotification('æ‰€æœ‰æ•°æ®å·²æ¸…ç©º');
            }
        });

        // æ”¶é›†æ‰€æœ‰æ•°æ®
        function collectAllData() {
            const sections = document.querySelectorAll('.tips-section');
            const data = {
                sections: [],
                exportTime: new Date().toISOString(),
                version: '2.0'
            };

            sections.forEach((section, index) => {
                const sectionData = {
                    id: section.id,
                    title: section.querySelector('.tips-header span').textContent,
                    tips: []
                };

                const tbody = section.querySelector('tbody');
                if (tbody) {
                    const rows = tbody.querySelectorAll('tr');
                    rows.forEach((row, rowIndex) => {
                        const rowData = {
                            number: getInputValue(row, '.number-edit'),
                            title: getInputValue(row, '.title-edit'),
                            content: getInputValue(row, '.content-edit')
                        };
                        sectionData.tips.push(rowData);
                    });
                }

                data.sections.push(sectionData);
            });

            return data;
        }

        // å¯¼å…¥æ•°æ®
        function importData(data) {
            if (!data || !data.sections) {
                showNotification('å¯¼å…¥å¤±è´¥ï¼šæ•°æ®æ ¼å¼ä¸æ­£ç¡®');
                return;
            }

            // æ¸…ç©ºç°æœ‰æ‰€æœ‰æ¿å—
            const existingSections = document.querySelectorAll('.tips-section');
            existingSections.forEach((section, index) => {
                if (index > 0) { // ä¿ç•™ç¬¬ä¸€ä¸ªæ¿å—ï¼Œåˆ é™¤å…¶ä»–
                    section.remove();
                }
            });

            // å¯¼å…¥æ•°æ®
            data.sections.forEach((sectionData, index) => {
                if (index === 0) {
                    // æ›´æ–°ç¬¬ä¸€ä¸ªæ¿å—
                    const firstSection = document.querySelector('.tips-section');
                    const tbody = firstSection.querySelector('tbody');
                    if (tbody) {
                        tbody.innerHTML = '';
                    }

                    // æ›´æ–°æ ‡é¢˜
                    const header = firstSection.querySelector('.tips-header span');
                    if (header) {
                        header.textContent = sectionData.title;
                    }

                    // æ·»åŠ æ•°æ®è¡Œ
                    sectionData.tips.forEach((tip, tipIndex) => {
                        const newRow = createNewTipRowFromData(tip, tipIndex);
                        if (tbody) tbody.appendChild(newRow);
                        bindRowEvents(newRow);
                    });
                } else {
                    // åˆ›å»ºæ–°æ¿å—
                    createSectionFromData(sectionData);
                }
            });

            updateRowNumbers();
            initDropdowns();
            showNotification(`æˆåŠŸå¯¼å…¥ ${data.sections.length} ä¸ªæ¿å—çš„æ•°æ®`);
        }

        // ä»æ•°æ®åˆ›å»ºæ–°æ¿å—
        function createSectionFromData(sectionData) {
            const sections = document.querySelectorAll('.tips-section');
            const currentSection = sections[sections.length - 1];

            // æ·±æ‹·è´æœ€åä¸€ä¸ªæ¿å—ä½œä¸ºæ¨¡æ¿
            const clone = currentSection.cloneNode(true);

            // è®¾ç½®æ–°ID
            clone.id = sectionData.id || ('tips-section-' + Date.now());

            // æ›´æ–°æ ‡é¢˜
            const header = clone.querySelector('.tips-header span');
            if (header) {
                header.textContent = sectionData.title;
            }

            // æ›´æ–°æ·»åŠ æŒ‰é’®çš„data-section
            const addButton = clone.querySelector('.add-tip');
            if (addButton) {
                addButton.dataset.section = clone.id;
            }

            // æ›´æ–°tbodyçš„ID
            const tbody = clone.querySelector('tbody');
            if (tbody) {
                tbody.id = clone.id + '-tbody';
                tbody.innerHTML = '';

                // æ·»åŠ æ•°æ®è¡Œ
                sectionData.tips.forEach((tip, tipIndex) => {
                    const newRow = createNewTipRowFromData(tip, tipIndex);
                    tbody.appendChild(newRow);
                    bindRowEvents(newRow);
                });
            }

            // æ’å…¥åˆ°å½“å‰æ¿å—åé¢
            currentSection.after(clone);

            // é‡æ–°ç»‘å®šæ–°æ¿å—çš„äº‹ä»¶
            bindSectionEvents(clone);
        }

        // ä»æ•°æ®åˆ›å»ºæ–°è¡Œ
        function createNewTipRowFromData(tip, index) {
            const newRow = document.createElement('tr');
            newRow.dataset.type = 'tips';
            newRow.dataset.index = index;

            newRow.innerHTML = `
                <td>
                    <div class="editable">
                        <span class="row-number">${tip.number || (index + 1)}.</span>
                        <input type="text" class="edit-input number-edit" value="${tip.number || (index + 1)}">
                    </div>
                </td>
                <td>
                    <div class="editable">
                        <span class="tip-title">${tip.title || 'æœªå‘½å'}</span>
                        <input type="text" class="edit-input title-edit" value="${tip.title || 'æœªå‘½å'}">
                    </div>
                    <button class="delete-row">Ã—</button>
                </td>
                <td>
                    <div class="editable">
                        <span class="tip-content">${tip.content || ''}</span>
                        <textarea class="edit-input content-edit">${tip.content || ''}</textarea>
                    </div>
                </td>
                <td></td>
            `;

            return newRow;
        }

        // è¾…åŠ©å‡½æ•°
        function getInputValue(row, selector) {
            const input = row.querySelector(selector);
            return input ? input.value : '';
        }

        document.addEventListener('DOMContentLoaded', function () {
            setupToggleButtons();
            bindAllEditEvents();
            initDropdowns();

            // ç»‘å®šåˆå§‹æ¿å—äº‹ä»¶
            document.querySelectorAll('.tips-section').forEach(section => {
                bindSectionEvents(section);
            });

            // é¡µé¢åŠ è½½åŠ¨ç”»
            const rows = document.querySelectorAll('.tips-section tbody tr');
            rows.forEach((row, index) => {
                row.style.opacity = '0';
                row.style.transform = 'translateX(-20px)';

                setTimeout(() => {
                    row.style.transition = 'all 0.5s ease';
                    row.style.opacity = '1';
                    row.style.transform = 'translateX(0)';
                }, index * 100 + 300);
            });
        });
    </script>


</body></html>